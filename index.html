<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025년 세금 변경 정책 안내</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js와 chartjs-plugin-datalabels를 제거합니다. -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        /* .chart-container 관련 스타일을 제거합니다. */
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        /* Q&A 섹션을 위한 사용자 정의 스타일 및 색상 */
        .accordion-item {
            background-color: #fff;
            border: 1px solid #fed7aa; /* 앰버-200 */
            border-radius: 0.5rem; /* 둥근 모서리 */
            overflow: hidden;
        }
        .accordion-header {
            background-color: #fef3c7; /* 앰버-100 */
            color: #78350f; /* 앰버-900 */
            padding: 1rem;
            font-weight: 600;
            font-size: 1.125rem; /* 텍스트 크기 */
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            text-align: left;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .accordion-header:hover {
            background-color: #fde68a; /* 앰버-200 호버 효과 */
        }
        .accordion-content p {
            padding: 1rem 1rem 0; /* 패딩 */
            color: #4b5563; /* 회색-700 */
        }
        .accordion-header span:last-child {
            transition: transform 0.3s ease;
        }
        .accordion-header span:last-child.rotate-180 {
            transform: rotate(180deg);
        }
        /* Style for the selected "Am I affected?" buttons */
        .button-selected {
            background-color: #d97706; /* amber-600 */
            color: #ffffff; /* white */
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl">

        <!-- Section 1: Hero/Introduction -->
        <header class="text-center mb-12">
            <div class="text-5xl mb-4">🐿️📜🦉</div>
            <h1 class="text-3xl md:text-4xl font-bold text-amber-900">다람아, 올빼미 할아버지가 <br>세금 이야기를 쉽고 재미있게 알려줄게!</h1>
            <p class="mt-4 text-lg text-gray-600">2025년부터 바뀌는 비과세 정책, 할아버지랑 같이 궁금증을 풀어볼까?</p>
        </header>

        <!-- Section 2: The Core Change -->
        <section id="core-change" class="mb-12">
            <h2 class="text-2xl font-bold text-center mb-6">다람아, 무엇이, 왜 바뀌는 걸까? 🤔</h2>
            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-lg shadow-md border border-gray-200">
                    <h3 class="font-bold text-xl mb-2 text-amber-800">🔍 무엇이 바뀌는 걸까요?</h3>
                    <p>이제 회사에서 받은 할인 혜택도 '월급'처럼 <br>'근로소득'의 일부로 포함된단다.
                        <br> 쉽게 말해, 세금을 계산할 때 같이 넣는다는 뜻이야.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md border border-gray-200">
                    <h3 class="font-bold text-xl mb-2 text-amber-800">⚖️ 왜 바뀌는 걸까요?</h3>
                    <p>모든 사람이 똑같이 공정하게 세금을 내도록 하기 <br>위한 거란다.
                    <br> 현금으로 받는 월급이나 할인 혜택이나 회사에서 받는 좋은 점은 똑같이 보는 거지.</p>
                </div>
            </div>
        </section>

        <!-- Section 3: Am I affected? -->
        <section id="who-is-affected" class="mb-12 text-center">
            <h2 class="text-2xl font-bold mb-4">그럼, 다람이 너도 세금을 더 내야 할까?</h2>
            <p class="text-gray-600 mb-6">올해 회사에서 제공한 할인 혜택을 혹시 사용했는지에 따라 달라진단다.
                <br> 아래 버튼을 눌러 확인해 보렴!</p>
            <div class="flex justify-center gap-4 mb-6">
                <!-- Initial styling with gray -->
                <button id="used-btn" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-full font-bold hover:bg-gray-300 transition">네, 할인을 사용했어요!</button>
                <button id="not-used-btn" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-full font-bold hover:bg-gray-300 transition">아니요, 전혀 안 썼어요.</button>
            </div>
            <div id="result-used" class="hidden bg-green-100 border-l-4 border-green-500 text-green-800 p-4 rounded-md text-left">
                <p><span class="font-bold">응, 다람아. 영향을 받을 수도 있단다.</span>
                    <br> 하지만 모든 할인 금액에 세금이 붙는 건 아니니 아래 계산기로 비과세 한도를 확인해보자!</p>
            </div>
            <div id="result-not-used" class="hidden bg-blue-100 border-l-4 border-blue-500 text-blue-800 p-4 rounded-md text-left">
                       <p><span class="font-bold">아니, 걱정하지 마렴!</span>
                            <br> 할인을 실제로 사용하지 않았다면 이번 정책 변경 때문에 추가로 낼 세금은 전혀 없단다.</p>
            </div>
        </section>


        <!-- Section 4: Interactive Calculator - MODIFIED SECTION -->
        <section id="calculator" class="mb-12 bg-white p-6 sm:p-8 rounded-lg shadow-lg border border-gray-200">
            <h2 class="text-2xl font-bold text-center mb-2">내 세금은 얼마나 될까? 올빼미 할아버지 간편 계산기 🧮</h2>
            <p class="text-center text-gray-600 mb-8">다람아, 네가 주로 사용한 회사 할인 혜택을 선택해서 예상되는 비과세 금액을 확인해보자.</p>
            <div class="grid md:grid-cols-1 gap-6 mb-8 items-start">
                <div class="flex flex-col gap-4">
                    <label class="inline-flex items-center text-lg font-medium text-gray-700 cursor-pointer">
                        <input type="checkbox" id="gfit-checkbox" class="form-checkbox h-5 w-5 text-amber-600 rounded-md focus:ring-amber-500 transition duration-150 ease-in-out">
                        <span class="ml-3">G-fit을 이용하고 있어요.</span>
                    </label>
                    <label class="inline-flex items-center text-lg font-medium text-gray-700 cursor-pointer">
                        <input type="checkbox" id="payco-cafe-checkbox" class="form-checkbox h-5 w-5 text-amber-600 rounded-md focus:ring-amber-500 transition duration-150 ease-in-out">
                        <span class="ml-3">페이코 할인혜택을 월 15만원 이상 받고 있어요.</span>
                    </label>
                    <label class="inline-flex items-center text-lg font-medium text-gray-700 cursor-pointer">
                        <input type="checkbox" id="none-checkbox" class="form-checkbox h-5 w-5 text-amber-600 rounded-md focus:ring-amber-500 transition duration-150 ease-in-out">
                        <span class="ml-3">아무것도 해당 안돼요.</span>
                    </label>
                </div>
            </div>
            <div class="text-center mb-8">
                <button id="calculate-btn" class="bg-amber-800 text-white px-8 py-3 rounded-full font-bold text-lg hover:bg-amber-900 transition">결과 확인하기!</button>
            </div>

            <div id="result-area" class="hidden"> <!-- 초기에는 숨겨져 있습니다 -->
                <!-- 차트 컨테이너를 제거합니다. -->
                <div id="result-text" class="text-center bg-gray-100 p-6 rounded-md">
                </div>
            </div>
        </section>

        <!-- Section 5: The Bottom Line -->
        <section id="bottom-line" class="mb-12 text-center">
            <h2 class="text-2xl font-bold mb-4">그래서, 다람아! 네가 뭘 해야 하냐고?</h2>
             <div class="bg-white p-8 rounded-lg shadow-md max-w-2xl mx-auto border border-gray-200">
                <p class="text-2xl text-amber-800 font-bold mb-4">비과세 한도 금액 이하로만 쓰면 된단다! 😌</p>
                <p class="text-lg text-gray-700">혹시라도 과세 대상 금액이 생긴다 해도,
                    <br> <span class="font-bold">회사가 알아서 모두 계산하고 처리해 줄 거야.</span>
                    <br> 나중에 연말정산 명세서에서 최종 결과를 확인만 하면 된단다.
                    <br> 다람이가 직접 해야 할 일은 전혀 없으니 걱정 마렴!</p>
            </div>
        </section>

        <!-- Section 6: FAQ Summary -->
        <section id="faq-summary">
            <h2 class="text-2xl font-bold text-center mb-6">다람이와 올빼미 할아버지의 궁금증 해결 시간! (Q&A)</h2>
            <div class="space-y-4 max-w-3xl mx-auto">
                <div class="accordion-item">
                    <button class="accordion-header">
                        <span>Q. 2025년부터 할인받은 것에 세금이 붙는다는데, 정말인가요? 왜요?</span>
                        <span>▼</span>
                    </button>
                    <div class="accordion-content">
                        <p>A. 네, 맞아요! 2월 28일에 법이 바뀌어서 이제 회사에서 받은 할인 금액도 '근로소득'으로 봐요.
                            <br> 세금을 더 공정하게 매기기 위한 조치랍니다.</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header">
                        <span>Q. 저는 G-FIT을 다니지 않는데, 그래도 세금을 내야 하나요?</span>
                        <span>▼</span>
                    </button>
                    <div class="accordion-content">
                        <p>A. 아니요! 한도금액 240만원까지는 괜찮아요.
                            <br> 또한, 할인을 전혀 쓰지 않았다면 추가로 낼 세금은 없으니 안심하세요.</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header">
                        <span>Q. '연 240만원 아니면 시가의 20%'라는 게 무슨 말인가요?</span>
                        <span>▼</span>
                    </button>
                    <div class="accordion-content">
                        <p>A. 우리한테 가장 유리한 쪽으로 세금을 깎아준다는 뜻이에요.
                            <br> 두 금액 중 더 큰 금액까지는 세금을 안 내도 돼요.
                            <br> 대부분의 경우 연 240만원까지는 세금 걱정 없이 할인을 받을 수 있을 거예요.</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header">
                        <span>Q. 한도를 넘어서 할인을 받으면 세금이 얼마나 붙나요? 제가 계산해야 하나요?</span>
                        <span>▼</span>
                    </button>
                    <div class="accordion-content">
                        <p>A. 한도를 초과한 금액은 다른 소득과 합쳐져서 세금이 계산돼요.
                            <br> 연말정산 때 한번에 계산할 거니까 직접 하실 일은 전혀 없답니다!</p>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const usedBtn = document.getElementById('used-btn');
            const notUsedBtn = document.getElementById('not-used-btn');
            const resultUsed = document.getElementById('result-used');
            const resultNotUsed = document.getElementById('result-not-used');
            
            // "내가 영향을 받을까?" 버튼에 대한 이벤트 리스너
            usedBtn.addEventListener('click', () => {
                usedBtn.classList.add('button-selected');
                usedBtn.classList.remove('bg-gray-200', 'text-gray-700');
                notUsedBtn.classList.remove('button-selected');
                notUsedBtn.classList.add('bg-gray-200', 'text-gray-700');
                resultUsed.classList.remove('hidden');
                resultNotUsed.classList.add('hidden');
            });

            notUsedBtn.addEventListener('click', () => {
                notUsedBtn.classList.add('button-selected');
                notUsedBtn.classList.remove('bg-gray-200', 'text-gray-700');
                usedBtn.classList.remove('button-selected');
                usedBtn.classList.add('bg-gray-200', 'text-gray-700');
                resultNotUsed.classList.remove('hidden');
                resultUsed.classList.add('hidden');
            });

            const gFitCheckbox = document.getElementById('gfit-checkbox');
            const paycoCafeCheckbox = document.getElementById('payco-cafe-checkbox');
            const noneCheckbox = document.getElementById('none-checkbox'); // 새롭게 추가된 체크박스
            const calculateBtn = document.getElementById('calculate-btn');
            const resultArea = document.getElementById('result-area');
            const resultText = document.getElementById('result-text');
            // Chart.js 관련 변수를 제거합니다.
            // let taxChart; 

            // 혜택 금액과 비과세 한도 상수
            const GFIT_ANNUAL_BENEFIT = 600000; // 60만원
            const PAYCO_CAFE_ANNUAL_BENEFIT = 1800000; // 180만원 (월 15만원 * 12개월)
            const NON_TAXABLE_FIXED_LIMIT = 2400000; // 240만원

            // 체크박스 상호작용 로직
            gFitCheckbox.addEventListener('change', () => {
                if (gFitCheckbox.checked) {
                    noneCheckbox.checked = false;
                    noneCheckbox.disabled = true;
                } else {
                    if (!paycoCafeCheckbox.checked) { // G-fit만 해제된 경우에만 '아무것도 해당 안돼요' 활성화
                        noneCheckbox.disabled = false;
                    }
                }
            });

            paycoCafeCheckbox.addEventListener('change', () => {
                if (paycoCafeCheckbox.checked) {
                    noneCheckbox.checked = false;
                    noneCheckbox.disabled = true;
                } else {
                    if (!gFitCheckbox.checked) { // Payco만 해제된 경우에만 '아무것도 해당 안돼요' 활성화
                        noneCheckbox.disabled = false;
                    }
                }
            });

            noneCheckbox.addEventListener('change', () => {
                if (noneCheckbox.checked) {
                    gFitCheckbox.checked = false;
                    paycoCafeCheckbox.checked = false;
                    gFitCheckbox.disabled = true;
                    paycoCafeCheckbox.disabled = true;
                } else {
                    gFitCheckbox.disabled = false;
                    paycoCafeCheckbox.disabled = false;
                }
            });


            // 계산 버튼에 대한 이벤트 리스너
            calculateBtn.addEventListener('click', () => {
                const isGFitSelected = gFitCheckbox.checked;
                const isPaycoSelected = paycoCafeCheckbox.checked;
                const isNoneSelected = noneCheckbox.checked;

                let totalBenefit = 0;
                let explanation = '';
                
                // resultArea를 항상 보이게 설정
                resultArea.classList.remove('hidden');

                // 총 혜택 금액 계산
                if (isGFitSelected) {
                    totalBenefit += GFIT_ANNUAL_BENEFIT;
                }
                if (isPaycoSelected) {
                    totalBenefit += PAYCO_CAFE_ANNUAL_BENEFIT;
                }
                
                // 설명 텍스트 설정
                if (isNoneSelected || totalBenefit === 0) { // 아무것도 선택하지 않았거나 총 혜택이 0원일 경우
                    explanation = `
                        <p class="text-xl font-bold mb-2 text-green-600">다람아, 네가 선택한 할인 혜택은 <span class="text-4xl text-green-800">0원</span>이구나!</p>
                        <p class="text-gray-600">따라서 추가적인 세금 부담은 없을 것으로 예상된단다.</p>
                        <p class="text-lg font-bold mt-4">연간 ${NON_TAXABLE_FIXED_LIMIT.toLocaleString('ko-KR')}원 비과세 한도 내에서 할인 혜택을 이용해 보렴 ✅</p>
                    `;
                } else {
                    // 고정된 비과세 한도를 기반으로 과세 금액 결정
                    const taxableAmount = Math.max(0, totalBenefit - NON_TAXABLE_FIXED_LIMIT);
                    const nonTaxableAmount = totalBenefit - taxableAmount;

                    if (totalBenefit > NON_TAXABLE_FIXED_LIMIT) {
                        explanation = `
                            <p class="text-xl font-bold mb-2 text-amber-700">이런 다람아, 연간 비과세 허용 금액 ${NON_TAXABLE_FIXED_LIMIT.toLocaleString('ko-KR')}원을 넘을 수도 있어요 조심해요! ⚠️</p>
                            <p class="text-gray-600">선택한 혜택을 합하면 연간 <span class="font-bold">${totalBenefit.toLocaleString('ko-KR')}원</span>만큼의 혜택을 받고 있단다.</p>
                            <p class="mt-4 text-xl font-bold">따라서 과세 대상이 되는 금액은 <span class="text-red-600">${taxableAmount.toLocaleString('ko-KR')}원</span> 이야.</p>
                            <p class="text-sm text-gray-500 mt-2">*이 금액은 다른 소득과 합산되어 세금이 계산됩니다.</p>
                        `;
                    } else { // totalBenefit is > 0 but <= NON_TAXABLE_FIXED_LIMIT
                        const remainingLimit = NON_TAXABLE_FIXED_LIMIT - totalBenefit;
                        explanation = `
                            <p class="text-xl font-bold mb-2 text-blue-600">다람아, 연간 ${totalBenefit.toLocaleString('ko-KR')}원의 비과세 할인 혜택을 받고 있구나~ 👍</p>
                            <p class="text-gray-600">남은 한도 금액 ${remainingLimit.toLocaleString('ko-KR')}원을 넘기지 않도록 주의하자꾸나😊</p>
                            <p class="mt-4 text-xl font-bold text-blue-600">*이 금액은 비과세 한도 내에 있어 세금이 부과되지 않습니다.</p>
                        `;
                    }
                }
                resultText.innerHTML = explanation;
            });

            // Q&A를 위한 아코디언 기능
            document.querySelectorAll('.accordion-header').forEach(button => {
                button.addEventListener('click', () => {
                    const content = button.nextElementSibling;
                    const arrow = button.querySelector('span:last-child');
                    
                    // 다른 열려 있는 아코디언 닫기
                    button.parentElement.parentElement.querySelectorAll('.accordion-content').forEach(item => {
                        if (item !== content) {
                           item.style.maxHeight = null;
                           item.previousElementSibling.querySelector('span:last-child').classList.remove('rotate-180');
                        }
                    });

                    // 현재 아코디언 토글
                    if (content.style.maxHeight) {
                        content.style.maxHeight = null;
                        arrow.classList.remove('rotate-180');
                    } else {
                        content.style.maxHeight = content.scrollHeight + "px";
                        arrow.classList.add('rotate-180');
                    }
                });
            });
        });
    </script>

</body>
</html>
